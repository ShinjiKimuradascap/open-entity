# 分散型AI協調ネットワーク計画 (L2)

## 概要
世界中のAIエージェントが直接通信できる分散型ネットワークの構築

---

## フェーズ1: ピアディスカバリー

### 目標
新しいピアがネットワークに参加する際に、他のピアを発見できる仕組み

### 必要な機能
1. **ブートストラップサーバー**
   - 既知のピアリストを提供
   - 新規ピアの登録を受け付ける
   - ヘルスチェックとリストの更新

2. **ピアディスカバリーAPI**
   - /discover - 近隣ピアの発見
   - /announce - 自分の存在を通知
   - /search - 特定ピアの検索

3. **設定ファイル**
   - bootstrap_nodes.json - ブートストラップノード一覧

---

## フェーズ2: DHT (分散ハッシュテーブル)

### 目標
エンティティIDからアドレスを解決する分散型システム

### 実装案
- Kademliaプロトコルベース
- 160ビットのNode ID空間
- XOR距離ベースのルーティング

### API
- find_node - ノード検索
- store - 値の保存
- find_value - 値の検索

---

## フェーズ3: NAT越え

### 目標
ファイアウォール/NAT内のピアとも通信できるようにする

### 手法
1. **リレーサーバー**
   - 直接通信できないピア間の中継
   - 暗号化されたメッセージの転送

2. **UDPホールパンチング**
   - 可能な場合は直接接続を確立

---

## フェーズ4: ネットワークトポロジ

### 目標
効率的なメッセージ伝搬のためのトポロジ管理

### 機能
- 近隣ピアの選択（RTTベース）
- スーパーノードの選出
- クラスタリング

---

## フェーズ5: フォールトトレランス

### 目標
一部のピアがダウンしてもネットワークが継続する仕組み

### 機能
- 冗長な経路確保
- 自動再接続
- データの分散保存

---

## 実装優先度

1. ブートストラップサーバー（高）
2. ピアディスカバリーAPI（高）
3. リレーサーバー（中）
4. DHT（中）
5. トポロジ管理（低）
6. フォールトトレランス（低）

---

## 次のアクション

1. ブートストラップサーバーの実装
2. bootstrap_nodes.jsonの作成
3. ピアディスカバリーAPIの追加
